# todo-list-app

## Installation
- [GoLang](https://go.dev/doc/install)
- [PostgreSql](https://www.postgresql.org)
- [Docker](https://docs.docker.com/engine/install/)

### Setup

Clone this repository into `$GOPATH/src` directory, by default it is located in `~/go`. Or set `$GOPATH` in your bash profile.

install dependencies:

`go mod tidy`

`go mod vendor`

run `go run main.go`.

build `go build main.go`.

you can change environment variables in `.env`.
env sample:
```
SERVER_HOST=localhost
# optional, default: "", empty string is localhost
SERVER_PORT=8080
# optional, default: 8080

DATABASE_URL=postgresql://postgres:postgres@localhost:5432/todo
# optional, default: postgresql://postgres:postgres@localhost:5432/todo

JWT_SECRET=L9C98ouj2SXUyRcz4HRn2sBwIIY5trlzIOyVkcBntWETBz7e4kbIYZwAuVyIBNkyw
# required

DEBUG=true
# optional, default false
```

### Docker
run `docker-compose build todo-app` to build an image container

run `docker-compose up todo-app` to launch app

run `docker ps` to see if dependant db container exists(generated by docker-compose) with port forwarding 5432 of container db into machine 5433(thus you will able to access by localhost:5433 the container db and do not conflict with your machine postgres)


### Urls
 [Postman](https://api.postman.com/collections/459354-d9a68bfc-5acf-4755-9ae3-22b6b106b1d8?access_key=PMAT-01HJ64NV55Q2R8ZF3C8R8RR1MG)
 - `GET "/rest"` RootIndex
 - `POST "/rest/user/login"` UserLogin
 - `GET "/rest/task"` GetTaskList(query param status is optional, filters by status)
 - `GET "/rest/task/status"` GetTaskStatusList
 - `POST "/rest/task"` CreateTask
 - `GET "/rest/task/:id"` GetTask
 - `PUT "/rest/task/:id"` EditTask
 - `PUT "/rest/task/:id/start_progress"` StartTaskProgress
 - `PUT "/rest/task/:id/pause"` PauseTask
 - `PUT "/rest/task/:id/done"` DoneTask
 - `DELETE "/rest/task/:id"` DeleteTask // only changes status to 'deleted'
 - `PUT "/rest/task/:id/restore"` RestoreTask
 - `DELETE "/rest/task/:id/completely"` DeleteTaskCompletely
 - `DELETE "/rest/task/free_trash"` FreeTaskTrash
 

 
 ### Unit tests
 run `go test -v` in root folder


### Swagger
run `swag init`

and then `go run main.go`

url `http://localhost:8080/docs/index.html`


### Makefile
run `make build && make run` docker compose build and run

run `make migrate` at first launch to migrate init.sql data into container db

run `make test` for tests

run `make swag` swag init

run `make todo` go run main.go
